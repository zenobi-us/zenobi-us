<svg viewBox="0 0 900 350" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .bg { fill: #1a1a2e; }
      .swimlane-bg { fill: #0f0f1e; stroke: #2d2d44; stroke-width: 1; }
      .mainthread-box { fill: #6366f1; }
      .subthread-box { fill: #a855f7; }
      .status-box { fill: #3b82f6; }
      .result-box { fill: #10b981; }
      .text { fill: white; font-family: 'Monaco', 'Courier New', monospace; font-size: 13px; text-anchor: middle; font-weight: 500; }
      .label { fill: #9ca3af; font-family: 'Monaco', 'Courier New', monospace; font-size: 12px; }
      .lane-label { fill: #6b7280; font-family: 'Monaco', 'Courier New', monospace; font-size: 11px; }
      .line { stroke: #4b5563; stroke-width: 2; fill: none; }
      .arrow { stroke: #4b5563; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .feedback { stroke: #10b981; stroke-width: 2.5; fill: none; stroke-dasharray: 4,6; marker-end: url(#arrowhead-green); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4b5563" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="350" class="bg"/>

  <!-- Swimlane backgrounds -->
  <rect x="0" y="0" width="900" height="130" class="swimlane-bg"/>
  <rect x="0" y="130" width="900" height="130" class="swimlane-bg"/>

  <!-- Swimlane labels -->
  <text x="15" y="65" class="lane-label">mainthread</text>
  <text x="15" y="195" class="lane-label">subthread</text>

  <!-- === MAINTHREAD LANE === -->

  <!-- Main thread boxes -->
  <rect x="100" y="25" width="110" height="40" rx="6" class="mainthread-box"/>
  <text x="155" y="52" class="text">/miniproject</text>

  <path d="M 210 45 L 240 45" class="arrow"/>

  <rect x="240" y="25" width="100" height="40" rx="6" class="status-box"/>
  <text x="290" y="52" class="text">see status</text>

  <path d="M 340 45 L 370 45" class="arrow"/>

  <rect x="370" y="25" width="130" height="40" rx="6" class="result-box"/>
  <text x="435" y="52" class="text">result: complete</text>

  <path d="M 500 45 L 530 45" class="arrow"/>

  <rect x="530" y="25" width="110" height="40" rx="6" class="mainthread-box"/>
  <text x="585" y="52" class="text">/miniproject</text>

  <!-- === SUBTHREAD LANE === -->

  <!-- Subthread 1 -->
  <rect x="100" y="145" width="75" height="35" rx="6" class="subthread-box"/>
  <text x="137" y="169" class="text">work</text>

  <!-- Subthread 2 -->
  <rect x="100" y="190" width="75" height="35" rx="6" class="subthread-box"/>
  <text x="137" y="214" class="text">work</text>

  <!-- Subthread 3 -->
  <rect x="100" y="235" width="75" height="35" rx="6" class="subthread-box"/>
  <text x="137" y="259" class="text">work</text>

  <!-- Lines from all work boxes converging to prepare -->
  <path d="M 175 163 L 200 163 L 200 210 L 240 210" class="line"/>
  <path d="M 175 208 L 220 208 L 220 210 L 240 210" class="line"/>
  <path d="M 175 253 L 210 253 L 210 210 L 240 210" class="line"/>

  <!-- Prepare box -->
  <rect x="240" y="190" width="95" height="40" rx="6" class="subthread-box"/>
  <text x="287" y="217" class="text">prepare</text>

  <!-- Feedback line up to result -->
  <path d="M 335 210 L 435 210 L 435 70" class="feedback"/>

  <!-- Flow description -->
  <text x="100" y="315" class="label" style="font-size: 13px; fill: #d1d5db;">Flow:</text>
  <text x="100" y="335" class="label">• Mainthread initiates /miniproject, checks status, gets result</text>
  <text x="500" y="335" class="label">• Subthreads work in parallel, prepare results, feed back</text>
</svg>
