<svg viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .bg { fill: #1a1a2e; }
      .mainthread-box { fill: #6366f1; }
      .subthread-box { fill: #a855f7; }
      .status-box { fill: #3b82f6; }
      .result-box { fill: #10b981; }
      .text { fill: white; font-family: 'Monaco', 'Courier New', monospace; font-size: 13px; text-anchor: middle; font-weight: 500; }
      .label { fill: #9ca3af; font-family: 'Monaco', 'Courier New', monospace; font-size: 12px; }
      .line { stroke: #4b5563; stroke-width: 2; fill: none; }
      .arrow { stroke: #4b5563; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .feedback { stroke: #10b981; stroke-width: 2.5; fill: none; stroke-dasharray: 4,6; marker-end: url(#arrowhead-green); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4b5563" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="350" class="bg"/>

  <!-- Main thread row -->
  <text x="30" y="55" class="label">main</text>

  <!-- Main thread boxes -->
  <rect x="70" y="35" width="110" height="40" rx="6" class="mainthread-box"/>
  <text x="125" y="62" class="text">/miniproject</text>

  <path d="M 180 55 L 210 55" class="arrow"/>

  <rect x="210" y="35" width="100" height="40" rx="6" class="status-box"/>
  <text x="260" y="62" class="text">see status</text>

  <path d="M 310 55 L 340 55" class="arrow"/>

  <rect x="340" y="35" width="130" height="40" rx="6" class="result-box"/>
  <text x="405" y="62" class="text">result: complete</text>

  <path d="M 470 55 L 500 55" class="arrow"/>

  <rect x="500" y="35" width="110" height="40" rx="6" class="mainthread-box"/>
  <text x="555" y="62" class="text">/miniproject</text>

  <!-- Subthread section -->
  <text x="30" y="135" class="label">subs</text>

  <!-- Subthread 1 -->
  <rect x="70" y="110" width="75" height="35" rx="6" class="subthread-box"/>
  <text x="107" y="134" class="text">work</text>

  <!-- Subthread 2 -->
  <rect x="70" y="155" width="75" height="35" rx="6" class="subthread-box"/>
  <text x="107" y="179" class="text">work</text>

  <!-- Subthread 3 -->
  <rect x="70" y="200" width="75" height="35" rx="6" class="subthread-box"/>
  <text x="107" y="224" class="text">work</text>

  <!-- Lines from subthreads to prepare, then to result -->
  <path d="M 145 128 L 165 128 L 165 175 L 210 175" class="line"/>
  <path d="M 145 173 L 190 173 L 190 175 L 210 175" class="line"/>
  <path d="M 145 218 L 175 218 L 175 175 L 210 175" class="line"/>

  <!-- Prepare box -->
  <rect x="210" y="155" width="95" height="40" rx="6" class="subthread-box"/>
  <text x="257" y="182" class="text">prepare</text>

  <!-- Feedback line up to result (dashed green) -->
  <path d="M 305 175 L 405 175 L 405 80" class="feedback"/>

  <!-- Flow description -->
  <text x="30" y="295" class="label" style="font-size: 13px; fill: #d1d5db;">Flow:</text>
  <text x="30" y="315" class="label">• Mainthread initiates /miniproject command</text>
  <text x="30" y="335" class="label">• Subthreads perform work in parallel</text>

  <text x="420" y="315" class="label">• Results fed back to mainthread</text>
  <text x="420" y="335" class="label">• Process repeats with updated context</text>
</svg>
